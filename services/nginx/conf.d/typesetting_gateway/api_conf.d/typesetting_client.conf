location /{
    #1.启用API密钥身份验证
    #2.启用限流
    limit_req_status 429;
    proxy_pass http://client_v1.0.0;
}

location ~/api {
    # 如果后端在本地比如127.0.0.1或者localhost请解开下面的rewrite注释即可
    #rewrite  ^.+api/?(.*)$ /$1 break;

    # 重写 URL，将 /api/getRsaPublicKey 改写为 /api/v1.0.0/api/getRsaPublicKey
#  rewrite ^/api/(.*)$ /server/v1.0.0/api/$1 break;

    # 这里填写后端地址（后面一定不要忘记添加 / ）
    proxy_pass http://nginxgateway/server/v1.0.0;

    #proxy_set_header Host $host;
    proxy_set_header Cookie $http_cookie;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_redirect default;

    # CORS 配置
    add_header Access-Control-Allow-Origin *;
    add_header Access-Control-Allow-Headers X-Requested-With;
    add_header Access-Control-Allow-Methods GET,POST,OPTIONS;
}